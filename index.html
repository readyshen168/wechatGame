<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>挡板小游戏</title>
    <style>
      canvas{
        border: 1px solid;
        margin: 30px;
        width: 300px;
      }
    </style>
</head>
<body>
    <canvas id="canvas">
    您的浏览器不支持html5 canvas
    </canvas>

    <script>
        const canvas = document.getElementById("canvas"),
        context = canvas.getContext("2d"),
        title = "挡板小游戏"

        // 给画布添加浅色背景
        context.beginPath()
        context.moveTo(0,0)
        context.lineTo(canvas.width, 0)
        context.lineTo(canvas.width, canvas.height)
        context.lineTo(0, canvas.height)
        context.lineTo(0,0)
        context.fillStyle = "whitesmoke"
        context.fill()

        // 添加阴影效果
        context.shadowBlur = 1
        context.shadowOffsetX = 2
        context.shadowOffsetY = 2
        context.shadowColor = "grey"

        // 设置文字样式
        context.font = "italic 1000 20px STHeiti"
        const titleWidth = context.measureText(title).width,
        titleHight = context.measureText("M").width,
        // 文字居中位置
        xmid = (canvas.width - titleWidth)/2,
        ymid = (canvas.height-titleHight)/2
        // 设置文本绘制基线
        context.textBaseline = 'top'
        context.textAlign = 'left'
        // context.fillStyle = "##FF0000"
        // 设置渐变样式
        const grd = context.createLinearGradient(xmid,0,xmid+titleWidth,0)
        grd.addColorStop(0,"red")
        grd.addColorStop(0.5,"white")
        grd.addColorStop(1,"blue")
        context.fillStyle = grd
        context.fillText(title, xmid, ymid)
        // 替代方案是直接用canvas的中线来定位，只需调整文本的textBaseline和textAlign即可

        // 用fillRect绘制挡板
        const panelHeight = 50,
        panelWidth = 10
        context.fillStyle = "brown"
        context.fillRect(canvas.width-panelWidth, (canvas.height-panelHeight)/2, panelWidth, panelHeight)
        // 无需context.fill()，若保留则会填充整个画布

        // 用artTo绘制小球
        const radius = 10,
            halfWidth = canvas.width/2,
            halfHeight = canvas.height/2,
        p1 = {x:halfWidth + radius, y:halfHeight}
        p2 = {x:halfWidth, y:halfHeight+radius}
        p3 = {x:halfWidth - radius, y:halfHeight}
        p4 = {x:halfWidth, y:halfHeight-radius}
        // 切线控制点
        p12 = {x:p1.x, y:p2.y}
        p23 = {x:p3.x, y:p2.y}
        p34 = {x:p3.x, y:p4.y}
        p41 = {x:p1.x, y:p4.y}
        // 开始绘制
        context.beginPath()
        context.moveTo(p1.x, p1.y)
        context.arcTo(p12.x, p12.y, p2.x, p2.y, radius)
        context.arcTo(p23.x, p23.y, p3.x, p3.y, radius)
        context.arcTo(p34.x, p34.y, p4.x, p4.y, radius)
        context.arcTo(p41.x, p41.y, p1.x, p1.y, radius)
        context.fillStyle = "black"
        context.fillStyle = "white"
        context.stroke()
        context.fill()
    </script>


</body>
</html>